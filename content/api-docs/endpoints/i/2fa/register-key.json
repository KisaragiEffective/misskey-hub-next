{"data":{"post":{"operationId":"i/2fa/register-key","summary":"i/2fa/register-key","description":"No description provided.\n\n**Internal Endpoint**: This endpoint is an API for the misskey mainframe and is not intended for use by third parties.\n**Credential required**: *Yes*","externalDocs":{"description":"Source code","url":"https://github.com/misskey-dev/misskey/blob/develop/packages/backend/src/server/api/endpoints/i/2fa/register-key.ts"},"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string"},"token":{"type":["string","null"]}},"required":["password"]}}}},"responses":{"200":{"description":"OK (with results)","content":{"application/json":{"schema":{"type":"object","properties":{"rp":{"type":"object","properties":{"id":{"type":"string"}}},"user":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"displayName":{"type":"string"}},"required":["id","name","displayName"]},"challenge":{"type":"string"},"pubKeyCredParams":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string"},"alg":{"type":"number"}},"required":["type","alg"]}},"timeout":{"type":["number","null"]},"excludeCredentials":{"type":["array","null"],"items":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"transports":{"type":"array","items":{"type":"string","enum":["ble","cable","hybrid","internal","nfc","smart-card","usb"]}}},"required":["id","type","transports"]}},"authenticatorSelection":{"type":["object","null"],"properties":{"authenticatorAttachment":{"type":"string","enum":["cross-platform","platform"]},"requireResidentKey":{"type":"boolean"},"userVerification":{"type":"string","enum":["discouraged","preferred","required"]}},"required":["authenticatorAttachment","requireResidentKey","userVerification"]},"attestation":{"type":["string","null"],"enum":["direct","enterprise","indirect","none",null]},"extensions":{"type":["object","null"],"properties":{"appid":{"type":["string","null"]},"credProps":{"type":["boolean","null"]},"hmacCreateSecret":{"type":["boolean","null"]}},"required":["appid","credProps","hmacCreateSecret"]}},"required":["rp","user","challenge","pubKeyCredParams","timeout","excludeCredentials","authenticatorSelection","attestation","extensions"]}}}},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"USER_NOT_FOUND":{"value":{"error":{"message":"User not found.","code":"USER_NOT_FOUND","id":"652f899f-66d4-490e-993e-6606c8ec04c3"}}},"INCORRECT_PASSWORD":{"value":{"error":{"message":"Incorrect password.","code":"INCORRECT_PASSWORD","id":"38769596-efe2-4faf-9bec-abbb3f2cd9ba"}}},"TWO_FACTOR_NOT_ENABLED":{"value":{"error":{"message":"2fa not enabled.","code":"TWO_FACTOR_NOT_ENABLED","id":"bf32b864-449b-47b8-974e-f9a5468546f1"}}},"INVALID_PARAM":{"value":{"error":{"message":"Invalid param.","code":"INVALID_PARAM","id":"3d81ceae-475f-4600-b2a8-2bc116157532"}}}}}}},"401":{"description":"Authentication error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"CREDENTIAL_REQUIRED":{"value":{"error":{"message":"Credential required.","code":"CREDENTIAL_REQUIRED","id":"1384574d-a912-4b81-8601-c7b1c4085df1"}}}}}}},"403":{"description":"Forbidden error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"AUTHENTICATION_FAILED":{"value":{"error":{"message":"Authentication failed. Please ensure your token is correct.","code":"AUTHENTICATION_FAILED","id":"b0a7f5f8-dc2f-4171-b91f-de88ad238e14"}}}}}}},"418":{"description":"I'm Ai","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"I_AM_AI":{"value":{"error":{"message":"You sent a request to Ai-chan, Misskey's showgirl, instead of the server.","code":"I_AM_AI","id":"60c46cd1-f23a-46b1-bebe-5d2b73951a84"}}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"INTERNAL_ERROR":{"value":{"error":{"message":"Internal error occurred. Please contact us if the error persists.","code":"INTERNAL_ERROR","id":"5d37dbcb-891e-41ca-a3d6-e690c97775ac"}}}}}}}}}},"title":"i/2fa/register-key"}